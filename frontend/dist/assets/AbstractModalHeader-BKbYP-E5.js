import{t as ve,A as m,r as l,s as Te,q as be,k as h,v as K,w as xe,j as d,B as Ce,z as ye}from"./index-AWqnUruu.js";import{a as U,c as H}from"./useWindow-DQikT-kc.js";import{u as we}from"./usePrevious-1mlFE_di.js";import{u as Me,i as Re,r as G,h as ke}from"./hasClass-Du_ELl1y.js";import{d as Oe,q as u}from"./DataKey-COGXBUcQ.js";function k(n){n===void 0&&(n=ve());try{var e=n.activeElement;return!e||!e.nodeName?null:e}catch{return n.body}}function Ae(n=document){const e=n.defaultView;return Math.abs(e.innerWidth-n.documentElement.clientWidth)}const V=Oe("modal-open");class B{constructor({ownerDocument:e,handleContainerOverflow:t=!0,isRTL:o=!1}={}){this.handleContainerOverflow=t,this.isRTL=o,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Ae(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},o=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[o]:s.style[o]},e.scrollBarWidth&&(t[o]=`${parseInt(m(s,o)||"0",10)+e.scrollBarWidth}px`),s.setAttribute(V,""),m(s,t)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(V),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return t!==-1||(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),t!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t}remove(e){const t=this.modals.indexOf(e);t!==-1&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const Be=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Ne(n,e){if(n==null)return{};var t={};for(var o in n)if({}.hasOwnProperty.call(n,o)){if(e.indexOf(o)>=0)continue;t[o]=n[o]}return t}let O;function Le(n){return O||(O=new B({ownerDocument:n==null?void 0:n.document})),O}function je(n){const e=U(),t=n||Le(e),o=l.useRef({dialog:null,backdrop:null});return Object.assign(o.current,{add:()=>t.add(o.current),remove:()=>t.remove(o.current),isTopModal:()=>t.isTopModal(o.current),setDialogRef:l.useCallback(s=>{o.current.dialog=s},[]),setBackdropRef:l.useCallback(s=>{o.current.backdrop=s},[])})}const X=l.forwardRef((n,e)=>{let{show:t=!1,role:o="dialog",className:s,style:a,children:T,backdrop:g=!0,keyboard:b=!0,onBackdropClick:N,onEscapeKeyDown:L,transition:$,runTransition:z,backdropTransition:J,runBackdropTransition:Q,autoFocus:Z=!0,enforceFocus:ee=!0,restoreFocus:te=!0,restoreFocusOptions:ne,renderDialog:j,renderBackdrop:oe=r=>d.jsx("div",Object.assign({},r)),manager:se,container:re,onShow:S,onHide:D=()=>{},onExit:ae,onExited:W,onExiting:ie,onEnter:le,onEntering:de,onEntered:ce}=n,ue=Ne(n,Be);const c=U(),p=Me(re),i=je(se),fe=Te(),he=we(t),[x,F]=l.useState(!t),E=l.useRef(null);l.useImperativeHandle(e,()=>i,[i]),be&&!he&&t&&(E.current=k(c==null?void 0:c.document)),t&&x&&F(!1);const I=h(()=>{if(i.add(),w.current=K(document,"keydown",pe),y.current=K(document,"focus",()=>setTimeout(ge),!0),S&&S(),Z){var r,_;const R=k((r=(_=i.dialog)==null?void 0:_.ownerDocument)!=null?r:c==null?void 0:c.document);i.dialog&&R&&!H(i.dialog,R)&&(E.current=R,i.dialog.focus())}}),C=h(()=>{if(i.remove(),w.current==null||w.current(),y.current==null||y.current(),te){var r;(r=E.current)==null||r.focus==null||r.focus(ne),E.current=null}});l.useEffect(()=>{!t||!p||I()},[t,p,I]),l.useEffect(()=>{x&&C()},[x,C]),xe(()=>{C()});const ge=h(()=>{if(!ee||!fe()||!i.isTopModal())return;const r=k(c==null?void 0:c.document);i.dialog&&r&&!H(i.dialog,r)&&i.dialog.focus()}),me=h(r=>{r.target===r.currentTarget&&(N==null||N(r),g===!0&&D())}),pe=h(r=>{b&&Re(r)&&i.isTopModal()&&(L==null||L(r),r.defaultPrevented||D())}),y=l.useRef(),w=l.useRef(),Ee=(...r)=>{F(!0),W==null||W(...r)};if(!p)return null;const P=Object.assign({role:o,ref:i.setDialogRef,"aria-modal":o==="dialog"?!0:void 0},ue,{style:a,className:s,tabIndex:-1});let M=j?j(P):d.jsx("div",Object.assign({},P,{children:l.cloneElement(T,{role:"document"})}));M=G($,z,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!t,onExit:ae,onExiting:ie,onExited:Ee,onEnter:le,onEntering:de,onEntered:ce,children:M});let v=null;return g&&(v=oe({ref:i.setBackdropRef,onClick:me}),v=G(J,Q,{in:!!t,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:v})),d.jsx(d.Fragment,{children:Ce.createPortal(d.jsxs(d.Fragment,{children:[v,M]}),p)})});X.displayName="Modal";const He=Object.assign(X,{Manager:B});function Se(n,e){n.classList?n.classList.add(e):ke(n,e)||(typeof n.className=="string"?n.className=n.className+" "+e:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+e))}function q(n,e){return n.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function De(n,e){n.classList?n.classList.remove(e):typeof n.className=="string"?n.className=q(n.className,e):n.setAttribute("class",q(n.className&&n.className.baseVal||"",e))}const f={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class Y extends B{adjustAndStore(e,t,o){const s=t.style[e];t.dataset[e]=s,m(t,{[e]:`${parseFloat(m(t,e))+o}px`})}restore(e,t){const o=t.dataset[e];o!==void 0&&(delete t.dataset[e],m(t,{[e]:o}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();if(Se(t,"modal-open"),!e.scrollBarWidth)return;const o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";u(t,f.FIXED_CONTENT).forEach(a=>this.adjustAndStore(o,a,e.scrollBarWidth)),u(t,f.STICKY_CONTENT).forEach(a=>this.adjustAndStore(s,a,-e.scrollBarWidth)),u(t,f.NAVBAR_TOGGLER).forEach(a=>this.adjustAndStore(s,a,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();De(t,"modal-open");const o=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";u(t,f.FIXED_CONTENT).forEach(a=>this.restore(o,a)),u(t,f.STICKY_CONTENT).forEach(a=>this.restore(s,a)),u(t,f.NAVBAR_TOGGLER).forEach(a=>this.restore(s,a))}}let A;function Ge(n){return A||(A=new Y(n)),A}const Ve=Y,We=l.createContext({onHide(){}}),qe=l.forwardRef(({closeLabel:n="Close",closeVariant:e,closeButton:t=!1,onHide:o,children:s,...a},T)=>{const g=l.useContext(We),b=h(()=>{g==null||g.onHide(),o==null||o()});return d.jsxs("div",{ref:T,...a,children:[s,t&&d.jsx(ye,{"aria-label":n,variant:e,onClick:b})]})});export{qe as A,He as B,We as M,Ve as a,Ge as g};
